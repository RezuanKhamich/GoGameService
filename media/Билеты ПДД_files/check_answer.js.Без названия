$(document).ready(function() {
	$('.answers .btn').click(function() {
		questionNum = $(this).parents('.question').attr('question-id');
		executed = $(this).parents('.question').hasClass('executed');

		answerId = $(this).attr('answer-id');
		truth = $(this).parent().children('.truth-id').val();
		result = answerId == truth;

		$(this).removeClass('btn-default');
		if (result) {
			$(this).addClass('btn-success');
		} else {
			$(this).addClass('btn-danger');
		}

		if (!executed) {
			$(this).parents('.question').addClass('executed');
			$('[pagination-id="' + questionNum + '"]').removeClass('btn-default');

			if (result) {
				$('[pagination-id="' + questionNum + '"]').addClass('btn-success');
			} else {
				$('[pagination-id="' + questionNum + '"]').addClass('btn-danger');
			}

			$.ajax({
				type: 'POST',
				url: 'api/ajax-quiz.php',
				response:'html',
				data: {
					answer: result
			  },
				success: function(data) {
					if (data == '1') {
						$('#clickToWin').trigger('click');
					} else if (data == '2') {
						$('.choose-question.addition').eq(0).removeClass('addition');
					} else if (data == '3') {
						$('#clickToLose').trigger('click');
					}
				}
			});
		}
	});
});
